{% extends 'events/base_events.html' %}
{% load jalali_tags %}
{% load custom_filters %}
{% block events_content %}
    <div class="container mt-4">
        <h2>ğŸ“‹ Ø¬Ø²Ø¦ÛŒØ§Øª Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø¢ØªÛŒ</h2>
        <p class="text-muted">ÙÙ‚Ø· Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒÛŒ Ú©Ù‡ Ù‡Ù†ÙˆØ² Ø¨Ø±Ú¯Ø²Ø§Ø± Ù†Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ Ùˆ ØªØ§Ø±ÛŒØ® Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø´Ø¯Ù‡ Ø¯Ø± Ø¢ÛŒÙ†Ø¯Ù‡ Ø§Ø³Øª.</p>
        <div class="row">
            <div class="col-xl-12 mb-30">
                <div class="card card-statistics h-100">
                    <div class="card-body">


                        {% if upcoming_details %}
                            <div class="table-responsive">
                                <table class="table table-hover center-aligned-table mb-10 text-center">
                                    <thead>
                                    <tr class="text-dark">
                                        <th>Ø±ÙˆÛŒØ¯Ø§Ø¯</th>
                                        <th>ØªØ§Ø±ÛŒØ® Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ§ÛŒ</th>
                                        <th>ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡</th>
                                        <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                        <th>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for detail in upcoming_details %}
                                        <tr>
                                            <td>
                                                <a href="{% url 'events:event_detail' detail.event.pk %}">
                                                    {{ detail.event.name }}
                                                </a>
                                            </td>
                                            <td>{{ detail.scheduled_date|to_jalali:'%Y/%m/%d'}}</td>
                                            <td>
                                                {% with days_left=detail.scheduled_date|sub:today %}
                                                    {% if days_left == 0 %}
                                                        <span class="btn btn-primary">Ø§Ù…Ø±ÙˆØ²</span>
                                                    {% elif days_left > 0 %}
                                                        <span class="btn btn-success">{{ days_left }} Ø±ÙˆØ²</span>
                                                    {% else %}
                                                        <span class="btn btn-danger">{{ days_left }} Ø±ÙˆØ² ØªØ£Ø®ÛŒØ±</span>
                                                    {% endif %}
                                                {% endwith %}
                                            </td>
                                            <td>
                                                {% if detail.status_relative_to_schedule == 'not_held' %}
                                                    <span class="btn btn-secondary">Ø¨Ø±Ú¯Ø²Ø§Ø± Ù†Ø´Ø¯Ù‡</span>
                                                {% elif detail.status_relative_to_schedule == 'early' %}
                                                    <span class="btn btn-warning">ØªØ¹Ø¬ÛŒÙ„</span>
                                                {% elif detail.status_relative_to_schedule == 'late' %}
                                                    <span class="btn btn-danger">ØªØ§Ø®ÛŒØ±</span>
                                                {% else %}
                                                    <span class="btn btn-success">Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹</span>
                                                {% endif %}
                                            </td>
                                            <td>{{ detail.event.category.name|default:"Ø¨Ø¯ÙˆÙ† Ø¯Ø³ØªÙ‡" }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            <!-- Pagination -->
                            {% if is_paginated %}
                                <nav aria-label="Page navigation">
                                    <ul class="pagination">
                                        {% if page_obj.has_previous %}
                                            <li class="page-item"><a class="page-link"
                                                                     href="?page={{ page_obj.previous_page_number }}">Ù‚Ø¨Ù„ÛŒ</a>
                                            </li>
                                        {% endif %}
                                        <li class="page-item active"><span
                                                class="page-link">{{ page_obj.number }} Ø§Ø² {{ page_obj.paginator.num_pages }}</span>
                                        </li>
                                        {% if page_obj.has_next %}
                                            <li class="page-item"><a class="page-link"
                                                                     href="?page={{ page_obj.next_page_number }}">Ø¨Ø¹Ø¯ÛŒ</a>
                                            </li>
                                        {% endif %}
                                    </ul>
                                </nav>
                            {% endif %}
                        {% else %}
                            <div class="alert alert-info">Ù‡ÛŒÚ† Ø¬Ø²Ø¦ÛŒØ§Øª Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¢ØªÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}